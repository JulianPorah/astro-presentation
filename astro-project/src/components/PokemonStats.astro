---
const { pokemonName } = Astro.props;
let pokemonStats = null;
let error = null;

try {
    const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonName}`);
    const data = await response.json();
    pokemonStats = data.stats;
} catch (err) {
    error = 'Fehler beim Laden der Stats.';
}

await new Promise(resolve => setTimeout(resolve, 1500));
---

<div>
    {error && <p>{error}</p>}
    {pokemonStats ? (
            <div>
                <h3>Stats:</h3>
                <ul>
                    {pokemonStats.map((stat: { stat: { name: string }, base_stat: number }) => (
                            <li>{stat.stat.name}: {stat.base_stat}</li>
                    ))}
                </ul>
            </div>
    ) : (
            <p>Stats werden geladen</p>
    )}
</div>

<style scoped></style>
